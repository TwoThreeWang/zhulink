{{ template "base.html" . }}

{{ define "content" }}
<!-- Dashboard 积分明细 - 紧凑、去框化设计 -->

<div class="max-w-5xl mx-auto py-8">
    <div class="flex flex-col md:flex-row gap-8 md:gap-12">
        <!-- 侧边栏 -->
        <aside class="md:w-48 flex-shrink-0">
            {{ template "dashboard_sidebar.html" dict "Active" "points" "UnreadCount" .UnreadCount "CurrentUser"
            .CurrentUser }}
        </aside>

        <!-- 主内容区 -->
        <main class="flex-grow min-w-0">
            <header class="mb-5 pl-1">
                <h1 class="text-xl font-bold text-ink mb-1">竹笋明细</h1>
                <p class="text-xs text-stone-400">透明化规则，让你知道"做什么能赚，做什么会亏"</p>
            </header>

            {{ if not .Logs }}
            <!-- 禅意空状态 -->
            <div class="py-12 text-center">
                <div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-stone-50 mb-3">
                    <i data-lucide="inbox" class="w-6 h-6 text-stone-300"></i>
                </div>
                <p class="text-stone-400 text-sm font-medium">积水空潭，清明无物</p>
            </div>
            {{ else }}
            <!-- 积分流水 - 极简表格 -->
            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead>
                        <tr class="border-b border-stone-100">
                            <th class="py-2 px-1 text-xs text-stone-400 uppercase tracking-widest font-sans w-32">时间
                            </th>
                            <th class="py-2 px-1 text-xs text-stone-400 uppercase tracking-widest font-sans w-24">变动
                            </th>
                            <th class="py-2 px-1 text-xs text-stone-400 uppercase tracking-widest font-sans">说明</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-stone-50">
                        {{ range .Logs }}
                        <tr class="hover:bg-stone-50/50 transition-colors group">
                            <td class="py-2.5 px-1 text-xs text-stone-400 group-hover:text-stone-500">
                                {{ .CreatedAt.Format "2006-01-02 15:04" }}
                            </td>
                            <td class="py-2.5 px-1">
                                {{ if gt .Amount 0 }}
                                <span class="inline-flex items-center gap-1 text-sm font-semibold text-moss">
                                    <i data-lucide="arrow-up" class="w-3 h-3"></i>
                                    +{{ .Amount }}
                                </span>
                                {{ else }}
                                <span class="inline-flex items-center gap-1 text-sm font-semibold text-stone-400">
                                    <i data-lucide="arrow-down" class="w-3 h-3"></i>
                                    {{ .Amount }}
                                </span>
                                {{ end }}
                            </td>
                            <td class="py-2.5 px-1 text-sm text-ink/80 group-hover:text-ink">
                                {{ .Action }}
                            </td>
                        </tr>
                        {{ end }}
                    </tbody>
                </table>
            </div>
            {{ end }}
        </main>
    </div>
</div>

{{ end }}