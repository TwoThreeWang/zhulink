{{ define "content" }}
<div class="min-h-[70vh]">
    <div class="max-w-4xl mx-auto">
        <!-- é¢åŒ…å±‘å¯¼èˆª -->
        <nav class="flex items-center space-x-2 text-sm text-ink-light mb-4">
            <a href="/rss" class="hover:text-moss transition-colors">ğŸŒ± è‹—åœƒ</a>
            <i data-lucide="chevron-right" class="w-4 h-4"></i>
            <span class="text-ink">çƒ­é—¨è®¢é˜…</span>
        </nav>

        <!-- é¡µé¢æ ‡é¢˜ -->
        <div class="flex items-center justify-between mb-6 pb-4 border-b border-stone-100">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-moss/10 rounded-lg flex items-center justify-center">
                    <i data-lucide="flame" class="w-5 h-5 text-moss"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-ink">çƒ­é—¨è®¢é˜…</h1>
                    <p class="text-sm text-ink-light">å‘ç°å…¨ç«™çƒ­é—¨ RSS è®¢é˜…æº</p>
                </div>
            </div>
            <div class="text-sm text-ink-light">
                å…± {{ .Total }} ä¸ªè®¢é˜…æº
            </div>
        </div>

        {{ if .Feeds }}
        <!-- è®¢é˜…æºåˆ—è¡¨ -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
            {{ range .Feeds }}
            {{ $feedID := .ID }}
            <div
                class="bg-white border border-stone-100 rounded-xl p-4 hover:shadow-md hover:border-moss/30 transition-all">
                <div class="flex items-start space-x-3">
                    <!-- å›¾æ ‡ -->
                    <div
                        class="flex-shrink-0 w-12 h-12 bg-stone-100 rounded-lg flex items-center justify-center overflow-hidden">
                        {{ if .IconURL }}
                        <img src="{{ .IconURL }}" alt="" class="w-full h-full object-cover">
                        {{ else }}
                        <span class="text-2xl">ğŸ“°</span>
                        {{ end }}
                    </div>

                    <!-- æ ‡é¢˜å’Œä¿¡æ¯ -->
                    <div class="flex-1 min-w-0">
                        <h3 class="font-medium text-ink truncate">{{ .Title }}</h3>
                        <p class="text-xs text-ink-light truncate mt-0.5" title="{{ .URL }}">
                            {{ .URL }}
                        </p>
                        <!-- è®¢é˜…äººæ•°å’Œè®¢é˜…æŒ‰é’® -->
                        <div class="flex items-center justify-between mt-2">
                            <div class="flex items-center text-sm text-ink-light">
                                <i data-lucide="users" class="w-4 h-4 mr-1"></i>
                                <span>{{ .SubscriberCount }} äººè®¢é˜…</span>
                            </div>
                            {{ if $.CurrentUser }}
                            {{ if index $.SubscribedMap $feedID }}
                            <!-- å·²è®¢é˜…çŠ¶æ€ -->
                            <span class="px-3 py-1 text-xs bg-stone-100 text-ink-light rounded-full">
                                å·²è®¢é˜…
                            </span>
                            {{ else }}
                            <!-- ä¸€é”®è®¢é˜…æŒ‰é’® -->
                            <form hx-post="/rss/subscribe" hx-swap="none"
                                hx-on::after-request="if(event.detail.xhr.status === 200) { window.location.reload(); }">
                                <input type="hidden" name="url" value="{{ .URL }}">
                                <button type="submit"
                                    class="px-3 py-1 text-xs bg-moss text-white rounded-full hover:bg-moss-dark transition-colors cursor-pointer">
                                    + è®¢é˜…
                                </button>
                            </form>
                            {{ end }}
                            {{ else }}
                            <!-- æœªç™»å½• - ç™»å½•æç¤º -->
                            <a href="/login"
                                class="px-3 py-1 text-xs border border-moss text-moss rounded-full hover:bg-moss hover:text-white transition-colors">
                                ç™»å½•è®¢é˜…
                            </a>
                            {{ end }}
                        </div>
                    </div>
                </div>
            </div>
            {{ end }}
        </div>

        <!-- åˆ†é¡µ -->
        {{ if gt .TotalPages 1 }}
        <div class="flex items-center justify-center space-x-2 py-6 border-t border-stone-100">
            <!-- ä¸Šä¸€é¡µ -->
            {{ if gt .CurrentPage 1 }}
            <a href="/rss/popular?page={{ add .CurrentPage -1 }}"
                class="px-4 py-2 text-sm border border-stone-200 rounded-lg hover:bg-stone-50 transition-colors">
                <i data-lucide="chevron-left" class="w-4 h-4 inline-block"></i>
                ä¸Šä¸€é¡µ
            </a>
            {{ else }}
            <span class="px-4 py-2 text-sm border border-stone-100 rounded-lg text-ink-lighter cursor-not-allowed">
                <i data-lucide="chevron-left" class="w-4 h-4 inline-block"></i>
                ä¸Šä¸€é¡µ
            </span>
            {{ end }}

            <!-- é¡µç ä¿¡æ¯ -->
            <span class="px-4 py-2 text-sm text-ink-light">
                ç¬¬ {{ .CurrentPage }} / {{ .TotalPages }} é¡µ
            </span>

            <!-- ä¸‹ä¸€é¡µ -->
            {{ if lt .CurrentPage .TotalPages }}
            <a href="/rss/popular?page={{ add .CurrentPage 1 }}"
                class="px-4 py-2 text-sm border border-stone-200 rounded-lg hover:bg-stone-50 transition-colors">
                ä¸‹ä¸€é¡µ
                <i data-lucide="chevron-right" class="w-4 h-4 inline-block"></i>
            </a>
            {{ else }}
            <span class="px-4 py-2 text-sm border border-stone-100 rounded-lg text-ink-lighter cursor-not-allowed">
                ä¸‹ä¸€é¡µ
                <i data-lucide="chevron-right" class="w-4 h-4 inline-block"></i>
            </span>
            {{ end }}
        </div>
        {{ end }}
        {{ else }}
        <!-- ç©ºçŠ¶æ€ -->
        <div class="flex flex-col items-center justify-center py-20 text-center text-ink-light">
            <div class="text-6xl mb-4">ğŸ“­</div>
            <h2 class="text-xl font-medium text-ink mb-2">æš‚æ— çƒ­é—¨è®¢é˜…</h2>
            <p class="text-sm">è¿˜æ²¡æœ‰ç”¨æˆ·æ·»åŠ  RSS è®¢é˜…</p>
        </div>
        {{ end }}
    </div>
</div>
{{ end }}