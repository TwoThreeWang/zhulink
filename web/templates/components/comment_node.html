{{ define "comment_item" }}
<div id="comment-{{ .ID }}" class="py-4 border-b border-stone-100 last:border-b-0 scroll-mt-24">
    <!-- é¡¶éƒ¨è¡Œï¼šå¤´åƒ ç”¨æˆ·å æ—¶é—´ + æ¥¼å±‚å· -->
    <div class="flex justify-between items-start mb-1">
        <div class="flex items-center gap-2">
            <a href="/u/{{ .User.ID }}" class="text-lg" title="{{ .User.Username }}">{{ .User.Avatar }}</a>
            <div class="text-sm">
                <a href="/u/{{ .User.ID }}" class="font-medium text-ink hover:text-moss transition-colors">{{
                    .User.Username }}</a>
                <span class="text-stone-400 ml-1">Â· {{ timeAgo .CreatedAt }}</span>
            </div>
        </div>
        <span class="text-stone-400 text-sm font-mono">#{{ .Floor }}</span>
    </div>

    <!-- æ“ä½œè¡Œ -->
    <div class="text-xs text-stone-400 mb-2 ml-8 flex gap-3">
        <button type="button" onclick="setReply({{ .ID }}, {{ .Floor }}, '{{ .User.Username }}')"
            class="hover:text-moss transition-colors cursor-pointer">å›å¤</button>
        <a href="#comment-{{ .ID }}" class="hover:text-moss transition-colors">é“¾æ¥</a>
        {{ if and $.CurrentUser (eq $.CurrentUser.ID .UserID) }}
        <button type="button" hx-delete="/comment/{{ .Cid }}" hx-confirm="ç¡®å®šè¦åˆ é™¤è¿™æ¡è¯„è®ºå—ï¼Ÿ" hx-target="#comment-{{ .ID }}"
            hx-swap="outerHTML" class="hover:text-red-500 transition-colors cursor-pointer">åˆ é™¤</button>
        {{ end }}
        {{ if and $.CurrentUser (eq $.CurrentUser.Role "admin") }}
        <button type="button" hx-delete="/admin/comment/{{ .Cid }}" hx-confirm="ç®¡ç†å‘˜ç¡®å®šè¦åˆ é™¤è¿™æ¡è¯„è®ºå—ï¼Ÿå°†æ‰£é™¤ä½œè€…ç§¯åˆ†å¹¶å‘é€é€šçŸ¥ã€‚"
            hx-target="#comment-{{ .ID }}" hx-swap="outerHTML"
            class="hover:text-orange-500 transition-colors cursor-pointer font-medium">ğŸ›¡ï¸ ç®¡ç†å‘˜åˆ é™¤</button>
        {{ end }}
    </div>

    <!-- å†…å®¹ -->
    <div
        class="ml-8 prose prose-sm prose-stone max-w-none
                prose-a:text-moss prose-a:no-underline hover:prose-a:underline
                prose-code:text-moss-dark prose-code:bg-stone-100 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded
                prose-pre:bg-neutral-800 prose-pre:text-neutral-200 prose-pre:shadow-lg prose-pre:border prose-pre:border-neutral-700">
        {{ .ContentHTML }}
    </div>
</div>
{{ end }}